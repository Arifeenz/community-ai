<!-- <!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ä‡∏∏‡∏°‡∏ä‡∏ô</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    h1 { color: darkgreen; }
    .profile { margin-bottom: 50px; }

    .chat-button {
      position: fixed; bottom: 20px; right: 20px;
      background: darkgreen; color: white;
      padding: 15px 25px; border-radius: 50px;
      font-size: 16px; cursor: pointer;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }

    #chatBox {
      position: fixed; bottom: 80px; right: 20px;
      width: 320px; height: 450px;
      background: #fff; border: 1px solid #ccc; border-radius: 10px;
      display: none; flex-direction: column;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }

    #chatMessages {
      flex: 1; overflow-y: auto; padding: 10px;
      display: flex; flex-direction: column;
    }

    .bubble {
      max-width: 80%; padding: 8px 12px; border-radius: 12px;
      margin: 4px 0; word-wrap: break-word;
    }

    .ai { align-self: flex-start; background: #fce4ec; color: #ad1457; }
    .user { align-self: flex-end; background: #c8e6c9; color: #1b5e20; }

    #chatInput { display: flex; }
    #chatInput input {
      flex: 1; padding: 8px; border: none; border-top: 1px solid #ccc;
      border-bottom-left-radius: 10px;
    }
    #chatInput button {
      padding: 8px 12px; border: none; border-top: 1px solid #ccc;
      background: darkgreen; color: white; cursor: pointer;
    }
    #voiceBtn { background: orange; border-bottom-right-radius: 10px; }
  </style>
</head>
<body>
  <div class="profile">
    <h1 id="communityTitle"></h1>
    <p>üë• ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å: 125 ‡∏Ñ‡∏ô</p>
    <p>üìÖ ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: ‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô 28 ‡∏Å.‡∏Ñ. 2025</p>
    <p>üì¢ ‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®: ‡πÄ‡∏ä‡∏¥‡∏ç‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏õ‡∏•‡∏π‡∏Å‡∏õ‡πà‡∏≤ 10 ‡∏™.‡∏Ñ. 2025</p>
  </div>

  <div id="chatBox">
    <div id="chatMessages"></div>
    <div id="chatInput">
      <input type="text" id="userMsg" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î üé§..." />
      <button onclick="sendMsg()">‡∏™‡πà‡∏á</button>
      <button id="voiceBtn" onclick="startVoice()">üé§</button>
    </div>
  </div>

  <div class="chat-button" onclick="openChat()">üí¨ ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡∏û‡∏•‡∏≠‡∏¢‡πÉ‡∏™</div>

  <script>
    const communityName = localStorage.getItem('communityName') || '‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì';
    document.getElementById('communityTitle').textContent = "üè° " + communityName;

    const chatBox = document.getElementById('chatBox');
    const chatMessages = document.getElementById('chatMessages');
    const userInput = document.getElementById('userMsg');

    function addBubble(text, sender) {
      const div = document.createElement('div');
      div.className = 'bubble ' + sender;
      div.textContent = text;
      chatMessages.appendChild(div);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function speakThai(text) {
      const audio = new Audio(
        "https://translate.google.com/translate_tts?ie=UTF-8&tl=th&client=tw-ob&q=" + encodeURIComponent(text)
      );
      audio.play();
    }

    // --- Chat Flow ---
    let step = 0;
    let activityData = { name: "", detail: "", date: "", fee: "" };

    function openChat() {
      chatBox.style.display = 'flex';
      if (chatMessages.childElementCount === 0) {
        const greeting = `‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞‡∏ä‡∏∏‡∏°‡∏ä‡∏ô ${communityName} ‡∏û‡∏•‡∏≠‡∏¢‡πÉ‡∏™‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏∞ üå∏`;
        addBubble(greeting, 'ai');
        speakThai(greeting);
        setTimeout(() => {
          const ask = "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏û‡∏•‡∏≠‡∏¢‡πÉ‡∏™‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞";
          addBubble(ask, 'ai');
          speakThai(ask);
        }, 8000);
      }
    }

    function sendMsg(text) {
      let message = text || userInput.value.trim();
      if (!message) return;
      addBubble(message, 'user');
      userInput.value = '';

      handleChatFlow(message);
    }

    function handleChatFlow(message) {
      if (step === 0) {
        // ‡∏£‡∏≠‡∏ü‡∏±‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÅ‡∏£‡∏Å
        if (message.includes("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°")) {
          step = 1;
          askNext("‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£‡∏Ñ‡∏∞?");
        } else {
          reply("‡∏û‡∏•‡∏≠‡∏¢‡πÉ‡∏™‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ ‡∏•‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ß‡πà‡∏≤ '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°' ‡∏î‡∏π‡∏Ñ‡πà‡∏∞");
        }
      } 
      else if (step === 1) {
        activityData.name = message;
        step = 2;
        askNext("‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á‡∏Ñ‡∏∞?");
      } 
      else if (step === 2) {
        activityData.detail = message;
        step = 3;
        askNext("‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏à‡∏±‡∏î‡∏ß‡∏±‡∏ô‡πÑ‡∏´‡∏ô‡∏Ñ‡∏∞?");
      } 
      else if (step === 3) {
        activityData.date = message;
        step = 4;
        askNext("‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏ô‡∏•‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏∞? ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ß‡πà‡∏≤ ‡∏ü‡∏£‡∏µ");
      } 
      else if (step === 4) {
        activityData.fee = message;
        step = 0;
        showSummary();
      }
    }

    function askNext(text) {
      addBubble(text, 'ai');
      speakThai(text);
    }

    function reply(text) {
      addBubble(text, 'ai');
      speakThai(text);
    }

    function showSummary() {
      const summary = `‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà‡∏Ç‡∏≠‡∏á‡∏ä‡∏∏‡∏°‡∏ä‡∏ô ${communityName}:\n` +
        `üìå ‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°: ${activityData.name}\n` +
        `üìù ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: ${activityData.detail}\n` +
        `üìÖ ‡∏ß‡∏±‡∏ô‡∏à‡∏±‡∏î: ${activityData.date}\n` +
        `üí∞ ‡∏Ñ‡πà‡∏≤‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô: ${activityData.fee}`;
      addBubble(summary, 'ai');
      speakThai("‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà‡∏Ç‡∏≠‡∏á‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏Ñ‡πà‡∏∞");
      console.log(activityData); // ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡πÑ‡∏õ‡πÄ‡∏Å‡πá‡∏ö‡∏ï‡πà‡∏≠‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï
    }

    // üé§ ‡∏ü‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á ‚Üí ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏ó‡∏¢
    function startVoice() {
      if (!('webkitSpeechRecognition' in window)) {
        alert('‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Speech Recognition');
        return;
      }

      const recognition = new webkitSpeechRecognition();
      recognition.lang = 'th-TH';
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      recognition.start();

      recognition.onresult = function(event) {
        const transcript = event.results[0][0].transcript;
        sendMsg(transcript);
      };

      recognition.onerror = function(event) {
        console.error("Voice error:", event.error);
      };
    }

    // ‚úÖ Enter ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
    userInput.addEventListener('keydown', function(event) {
      if (event.key === 'Enter') {
        event.preventDefault();
        sendMsg();
      }
    });
  </script>
</body>
</html> -->

<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <title>‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ä‡∏∏‡∏°‡∏ä‡∏ô</title>
    <style>
      body {
        font-family: sans-serif;
        padding: 20px;
        display: flex;
        gap: 30px;
      }
      h1 {
        color: darkgreen;
      }
      .profile {
        flex: 1;
      }
      .sidebar {
        width: 300px;
      }

      .activity-box {
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 10px;
        margin-bottom: 10px;
        background: #f9f9f9;
      }

      .chat-button {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: darkgreen;
        color: white;
        padding: 15px 25px;
        border-radius: 50px;
        font-size: 16px;
        cursor: pointer;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      }

      #chatBox {
        position: fixed;
        bottom: 80px;
        right: 20px;
        width: 320px;
        height: 450px;
        background: #fff;
        border: 1px solid #ccc;
        border-radius: 10px;
        display: none;
        flex-direction: column;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      }

      #chatMessages {
        flex: 1;
        overflow-y: auto;
        padding: 10px;
        display: flex;
        flex-direction: column;
      }

      .bubble {
        max-width: 80%;
        padding: 8px 12px;
        border-radius: 12px;
        margin: 4px 0;
        word-wrap: break-word;
      }

      .ai {
        align-self: flex-start;
        background: #fce4ec;
        color: #ad1457;
      }
      .user {
        align-self: flex-end;
        background: #c8e6c9;
        color: #1b5e20;
      }

      #chatInput {
        display: flex;
      }
      #chatInput input {
        flex: 1;
        padding: 8px;
        border: none;
        border-top: 1px solid #ccc;
        border-bottom-left-radius: 10px;
      }
      #chatInput button {
        padding: 8px 12px;
        border: none;
        border-top: 1px solid #ccc;
        background: darkgreen;
        color: white;
        cursor: pointer;
      }
      #voiceBtn {
        background: orange;
        border-bottom-right-radius: 10px;
      }
    </style>
  </head>
  <body>
    <!-- Sidebar -->
    <div class="sidebar">
      <h2>‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h2>
      <div id="activityList"></div>
      <h2>‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà (Preview)</h2>
      <div id="activityPreview"></div>
    </div>

    <!-- Profile -->
    <div class="profile">
      <h1 id="communityTitle"></h1>
      <p>üë• ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å: 125 ‡∏Ñ‡∏ô</p>
      <p>üìÖ ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: ‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô 28 ‡∏Å.‡∏Ñ. 2025</p>
      <p>üì¢ ‡∏Ç‡πà‡∏≤‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®: ‡πÄ‡∏ä‡∏¥‡∏ç‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏õ‡∏•‡∏π‡∏Å‡∏õ‡πà‡∏≤ 10 ‡∏™.‡∏Ñ. 2025</p>
    </div>

    <!-- Chat Box -->
    <div id="chatBox">
      <div id="chatMessages"></div>
      <div id="chatInput">
        <input
          type="text"
          id="userMsg"
          placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î üé§..."
        />
        <button onclick="sendMsg()">‡∏™‡πà‡∏á</button>
        <button id="voiceBtn" onclick="startVoice()">üé§</button>
      </div>
    </div>

    <div class="chat-button" onclick="openChat()">üí¨ ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö‡∏û‡∏•‡∏≠‡∏¢‡πÉ‡∏™</div>

    <script>
      const communityName =
        localStorage.getItem("communityName") || "‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì";
      document.getElementById("communityTitle").textContent =
        "üè° " + communityName;

      const chatBox = document.getElementById("chatBox");
      const chatMessages = document.getElementById("chatMessages");
      const userInput = document.getElementById("userMsg");

      const activityPreview = document.getElementById("activityPreview");
      const activityList = document.getElementById("activityList");

      function addBubble(text, sender) {
        const div = document.createElement("div");
        div.className = "bubble " + sender;
        div.textContent = text;
        chatMessages.appendChild(div);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      // function speakThai(text) {
      //   const audio = new Audio(
      //     "https://translate.google.com/translate_tts?ie=UTF-8&tl=th&client=tw-ob&q=" + encodeURIComponent(text)
      //   );
      //   audio.play();
      // }
      function speakThai(text) {
        if ("speechSynthesis" in window) {
          const utterance = new SpeechSynthesisUtterance(text);
          utterance.lang = "th-TH";

          const voices = speechSynthesis
            .getVoices()
            .filter((v) => v.lang.startsWith("th"));
          if (voices.length > 0) {
            utterance.voice = voices[0];
          }

          speechSynthesis.speak(utterance);
        } else {
          const audio = new Audio(
            "https://translate.google.com/translate_tts?ie=UTF-8&tl=th&client=tw-ob&q=" +
              encodeURIComponent(text)
          );
          audio.oncanplaythrough = () => audio.play();
        }
      }

      // --- Chat Flow ---
      let step = 0;
      let activityData = { name: "", detail: "", date: "", fee: "" };

      function openChat() {
        chatBox.style.display = "flex";
        if (chatMessages.childElementCount === 0) {
          const greeting = `‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞‡∏ä‡∏∏‡∏°‡∏ä‡∏ô ${communityName} ‡∏û‡∏•‡∏≠‡∏¢‡πÉ‡∏™‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏∞ üå∏`;
          addBubble(greeting, "ai");
          speakThai(greeting);
          setTimeout(() => {
            const ask = "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏û‡∏•‡∏≠‡∏¢‡πÉ‡∏™‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞";
            addBubble(ask, "ai");
            speakThai(ask);
          }, 7000);
        }
      }

      function sendMsg(text) {
        let message = text || userInput.value.trim();
        if (!message) return;
        addBubble(message, "user");
        userInput.value = "";

        handleChatFlow(message);
      }

      function handleChatFlow(message) {
        if (step === 0) {
          if (message.includes("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°")) {
            step = 1;
            askNext("‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£‡∏Ñ‡∏∞?");
          } else {
            reply("‡∏û‡∏•‡∏≠‡∏¢‡πÉ‡∏™‡∏¢‡∏±‡∏á‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ ‡∏•‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ß‡πà‡∏≤ '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°' ‡∏î‡∏π‡∏Ñ‡πà‡∏∞");
          }
        } else if (step === 1) {
          activityData.name = message;
          step = 2;
          askNext("‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á‡∏Ñ‡∏∞?");
        } else if (step === 2) {
          activityData.detail = message;
          step = 3;
          askNext("‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏à‡∏±‡∏î‡∏ß‡∏±‡∏ô‡πÑ‡∏´‡∏ô‡∏Ñ‡∏∞?");
        } else if (step === 3) {
          activityData.date = message;
          step = 4;
          askNext("‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏ô‡∏•‡∏∞‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏∞? ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ß‡πà‡∏≤ ‡∏ü‡∏£‡∏µ");
        } else if (step === 4) {
          activityData.fee = message;
          step = 0;
          showPreview();
        }
      }

      function askNext(text) {
        addBubble(text, "ai");
        speakThai(text);
      }

      function reply(text) {
        addBubble(text, "ai");
        speakThai(text);
      }

      function showPreview() {
        activityPreview.innerHTML = `
        <div class="activity-box">
          <p>üìå <b>${activityData.name}</b></p>
          <p>üìù ${activityData.detail}</p>
          <p>üìÖ ${activityData.date}</p>
          <p>üí∞ ${activityData.fee}</p>
          <button onclick="confirmActivity()">‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
          <button onclick="editActivity()">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
        </div>
      `;
        reply(
          "‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà‡∏Ç‡∏≠‡∏á‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏Ñ‡πà‡∏∞ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢"
        );
      }

      function confirmActivity() {
        const div = document.createElement("div");
        div.className = "activity-box";
        div.innerHTML = `
        <p>üìå <b>${activityData.name}</b></p>
        <p>üìù ${activityData.detail}</p>
        <p>üìÖ ${activityData.date}</p>
        <p>üí∞ ${activityData.fee}</p>
      `;
        activityList.prepend(div);
        activityPreview.innerHTML = "";
        reply("‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏∞ üéâ");
      }

      function editActivity() {
        step = 1;
        reply("‡∏ï‡∏Å‡∏•‡∏á‡∏Ñ‡πà‡∏∞ ‡πÄ‡∏£‡∏≤‡∏°‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà‡∏Å‡∏±‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞");
      }

      // üé§ ‡∏ü‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á ‚Üí ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏ó‡∏¢
      function startVoice() {
        if (!("webkitSpeechRecognition" in window)) {
          alert("‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Speech Recognition");
          return;
        }

        const recognition = new webkitSpeechRecognition();
        recognition.lang = "th-TH";
        recognition.interimResults = false;
        recognition.maxAlternatives = 1;

        recognition.start();

        recognition.onresult = function (event) {
          const transcript = event.results[0][0].transcript;
          sendMsg(transcript);
        };

        recognition.onerror = function (event) {
          console.error("Voice error:", event.error);
        };
      }

      // ‚úÖ Enter ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
      userInput.addEventListener("keydown", function (event) {
        if (event.key === "Enter") {
          event.preventDefault();
          sendMsg();
        }
      });
    </script>
  </body>
</html>
